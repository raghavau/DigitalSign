<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Digital Signature</title>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0"/>
		<meta name="apple-mobile-web-app-capable" content="yes"/>
		<meta name="apple-mobile-web-app-status-bar-style" content="black"/>
        <link rel="stylesheet" href="css/semantic.min.css">
        <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Exo+2">
		<script src="js/jquery-2.2.3.min.js" type="text/javascript" ></script>
		<script src="js/jquery.jqscribble.js" type="text/javascript"></script>
		<script src="js/jqscribble.extrabrushes.js" type="text/javascript"></script>
		<style>
            body{
                font-family: 'Exo 2';
            }
			.links button {
				padding: 3px;
				margin: 0px;
				border: 0px none #000;
				text-decoration: none;
				color: #999;
                height: 20px;
                width: 20px;
                background: transparent;
			}
            span{
                font-size: 15px;
            }
		</style>
	</head>
	<body><!--  -->
        <br>
		<div class="ui container" style="height: 85%">
            <div class="ui grid">
                <div class="four wide column">
                    <div class="column-right links">
                        <button onclick='$("#test").data("jqScribble").update({brushColor: "rgb(0,0,0)"});'><i class="fa fa-paint-brush fa-lg" aria-hidden="true" style="color: black;"></i></button>
                        <button onclick='$("#test").data("jqScribble").update({brushColor: "rgb(255,0,0)"});'><i class="fa fa-paint-brush fa-lg" aria-hidden="true" style="color: red;"></i></button>
                        <button onclick='$("#test").data("jqScribble").update({brushColor: "rgb(0,128,0)"});'><i class="fa fa-paint-brush fa-lg" aria-hidden="true" style="color: green;"></i></button>
                        <button onclick='$("#test").data("jqScribble").update({brushColor: "rgb(0,0,255)"});'><i class="fa fa-paint-brush fa-lg" aria-hidden="true" style="color: blue;"></i></button>
                    </div>
                </div>
                <div class="eight wide column">
                    <button class="ui red button tiny" id="btnClear"><i class="fa fa-close" aria-hidden="true" style="color: white;"></i> Clear</button>
                    <button class="ui teal button tiny" onclick='save();'><i class="fa fa-check" aria-hidden="true" style="color: white;"></i> Save</button>
                </div>
            </div>
            <br>
            <canvas id="test" style="border: 1px solid silver; width: 100%; height: 85%;"></canvas>
            <textarea id="txtimgstring"></textarea>
		</div>
		<script type="text/javascript">
		function save()
		{
            $("#test").data("jqScribble").save(function(imageData)
			{
                $("#txtimgstring").html(imageData);
				if(confirm("This will write a file using the example image_save.php. Is that cool with you?"))
				{
                    /*dataType: "json",*/
                    $.ajax({
                        type: 'POST',
                        url: 'http://61.0.225.169/SampleWebApi/api/UploadImage',
                        data: { ImageData: imageData },
                        success: function (result) {
                            alert('Data Saved Successfully.');
                            window.location.href = 'Capture.html';
                        },
                        error: function (xhr, status, error) {
                            alert('Error occurred while saving the data.\n\r' + xhr.responseText);
                        }
                    });
				}
			});
		}
		$(document).ready(function()
		{
			$("#test").jqScribble();
            $("#btnClear").click(function(){
                window.location.href = 'Capture.html';
            });
		});
		</script>
	</body>
</html>
